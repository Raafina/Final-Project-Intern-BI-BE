"use strict";

const { v4: uuidv4 } = require("uuid");

module.exports = {
  up: async (queryInterface, Sequelize) => {
    const existingPhones = new Set();

    const generateEmailFromName = (fullName) => {
      const emailPrefix = fullName.toLowerCase().replace(/\s+/g, "_");
      return `${emailPrefix}@example.com`;
    };

    const generateUniquePhone = () => {
      let phone;
      do {
        phone = `08${Math.floor(1000000000 + Math.random() * 900000000)}`;
      } while (existingPhones.has(phone));
      existingPhones.add(phone);
      return phone;
    };

    const getRandomTipeMagang = () => {
      const jurusanList = ["Magang Mandiri", "Magang KRS"];
      return jurusanList[Math.floor(Math.random() * jurusanList.length)];
    };

    const getRandomJurusan = () => {
      const jurusanList = [
        "Ekonomi",
        "Akuntansi",
        "Manajemen",
        "IT",
        "Hukum",
        "Statistika",
        "Ilmu Sosial",
      ];
      return jurusanList[Math.floor(Math.random() * jurusanList.length)];
    };

    const getRandomBidangPeminatan = () => {
      const bidangPeminatanList = [
        "Moneter",
        "Makroprudensial",
        "Sistem Pembayaran",
        "Pengelolaan Uang Rupiah",
        "Humas",
        "Internal",
      ];
      return bidangPeminatanList[
        Math.floor(Math.random() * bidangPeminatanList.length)
      ];
    };

    const data = [
      {
        id: uuidv4(),
        full_name: "Andi Prasetyo Nugroho",
        email: generateEmailFromName("Andi Prasetyo Nugroho"),
        phone: generateUniquePhone(),
        university: "Universitas Dian Nuswantoro",
        intern_category: getRandomTipeMagang(),
        semester: "4",
        IPK: "3.65",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-08-30",
        google_drive_link: "https://www.example.com",
        CV_score: 85,
        motivation_letter_score: 82,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Sari Dwi Lestari",
        email: generateEmailFromName("Sari Dwi Lestari"),
        phone: generateUniquePhone(),
        university: "Universitas Diponegoro",
        intern_category: getRandomTipeMagang(),
        semester: "5",
        IPK: "3.78",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-09-01",
        google_drive_link: "https://www.example.com",
        CV_score: 88,
        motivation_letter_score: 90,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Muhammad Rizki Ramadhan",
        email: generateEmailFromName("Muhammad Rizki Ramadhan"),
        phone: generateUniquePhone(),
        university: "Universitas Negeri Semarang",
        intern_category: getRandomTipeMagang(),
        semester: "6",
        IPK: "3.82",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-08-31",
        google_drive_link: "https://www.example.com",
        CV_score: 83,
        motivation_letter_score: 86,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Fatimah Azzahra Putri",
        email: generateEmailFromName("Fatimah Azzahra Putri"),
        phone: generateUniquePhone(),
        university: "UIN Walisongo Semarang",
        intern_category: getRandomTipeMagang(),
        semester: "4",
        IPK: "3.71",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-09-01",
        google_drive_link: "https://www.example.com",
        CV_score: 80,
        motivation_letter_score: 84,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Bayu Adi Saputra",
        email: generateEmailFromName("Bayu Adi Saputra"),
        phone: generateUniquePhone(),
        university: "Universitas Stikubank",
        intern_category: getRandomTipeMagang(),
        semester: "7",
        IPK: "3.89",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-08-30",
        google_drive_link: "https://www.example.com",
        CV_score: 91,
        motivation_letter_score: 88,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Indira Sari Dewi",
        email: generateEmailFromName("Indira Sari Dewi"),
        phone: generateUniquePhone(),
        university: "Politeknik Negeri Semarang",
        intern_category: getRandomTipeMagang(),
        semester: "5",
        IPK: "3.74",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-09-01",
        google_drive_link: "https://www.example.com",
        CV_score: 86,
        motivation_letter_score: 85,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Dedi Kurniawan",
        email: generateEmailFromName("Dedi Kurniawan"),
        phone: generateUniquePhone(),
        university: "Universitas Dian Nuswantoro",
        intern_category: getRandomTipeMagang(),
        semester: "8",
        IPK: "3.93",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-08-31",
        google_drive_link: "https://www.example.com",
        CV_score: 94,
        motivation_letter_score: 92,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Novia Wulandari",
        email: generateEmailFromName("Novia Wulandari"),
        phone: generateUniquePhone(),
        university: "Universitas Diponegoro",
        intern_category: getRandomTipeMagang(),
        semester: "4",
        IPK: "3.68",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-09-01",
        google_drive_link: "https://www.example.com",
        CV_score: 81,
        motivation_letter_score: 83,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Arief Budiman",
        email: generateEmailFromName("Arief Budiman"),
        phone: generateUniquePhone(),
        university: "Universitas Negeri Semarang",
        intern_category: getRandomTipeMagang(),
        semester: "6",
        IPK: "3.76",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-08-30",
        google_drive_link: "https://www.example.com",
        CV_score: 87,
        motivation_letter_score: 89,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Laila Sari Maharani",
        email: generateEmailFromName("Laila Sari Maharani"),
        phone: generateUniquePhone(),
        university: "UIN Walisongo Semarang",
        intern_category: getRandomTipeMagang(),
        semester: "5",
        IPK: "3.79",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-09-01",
        google_drive_link: "https://www.example.com",
        CV_score: 84,
        motivation_letter_score: 87,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Hendro Wijaya",
        email: generateEmailFromName("Hendro Wijaya"),
        phone: generateUniquePhone(),
        university: "Universitas Stikubank",
        intern_category: getRandomTipeMagang(),
        semester: "7",
        IPK: "3.85",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-08-31",
        google_drive_link: "https://www.example.com",
        CV_score: 89,
        motivation_letter_score: 91,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Putri Ayu Lestari",
        email: generateEmailFromName("Putri Ayu Lestari"),
        phone: generateUniquePhone(),
        university: "Politeknik Negeri Semarang",
        intern_category: getRandomTipeMagang(),
        semester: "4",
        IPK: "3.72",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-09-01",
        google_drive_link: "https://www.example.com",
        CV_score: 82,
        motivation_letter_score: 85,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Agus Setiawan",
        email: generateEmailFromName("Agus Setiawan"),
        phone: generateUniquePhone(),
        university: "Universitas Dian Nuswantoro",
        intern_category: getRandomTipeMagang(),
        semester: "6",
        IPK: "3.81",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-08-30",
        google_drive_link: "https://www.example.com",
        CV_score: 86,
        motivation_letter_score: 88,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Maya Sari Indah",
        email: generateEmailFromName("Maya Sari Indah"),
        phone: generateUniquePhone(),
        university: "Universitas Diponegoro",
        intern_category: getRandomTipeMagang(),
        semester: "8",
        IPK: "3.91",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-09-01",
        google_drive_link: "https://www.example.com",
        CV_score: 93,
        motivation_letter_score: 95,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Wahyu Pratama",
        email: generateEmailFromName("Wahyu Pratama"),
        phone: generateUniquePhone(),
        university: "Universitas Negeri Semarang",
        intern_category: getRandomTipeMagang(),
        semester: "5",
        IPK: "3.77",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-08-31",
        google_drive_link: "https://www.example.com",
        CV_score: 85,
        motivation_letter_score: 87,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Rina Aprillia",
        email: generateEmailFromName("Rina Aprillia"),
        phone: generateUniquePhone(),
        university: "UIN Walisongo Semarang",
        intern_category: getRandomTipeMagang(),
        semester: "7",
        IPK: "3.86",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-09-01",
        google_drive_link: "https://www.example.com",
        CV_score: 90,
        motivation_letter_score: 92,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Budi Santoso",
        email: generateEmailFromName("Budi Santoso"),
        phone: generateUniquePhone(),
        university: "Universitas Stikubank",
        intern_category: getRandomTipeMagang(),
        semester: "4",
        IPK: "3.69",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-08-30",
        google_drive_link: "https://www.example.com",
        CV_score: 83,
        motivation_letter_score: 86,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Diah Permata Sari",
        email: generateEmailFromName("Diah Permata Sari"),
        phone: generateUniquePhone(),
        university: "Politeknik Negeri Semarang",
        intern_category: getRandomTipeMagang(),
        semester: "6",
        IPK: "3.83",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-09-01",
        google_drive_link: "https://www.example.com",
        CV_score: 88,
        motivation_letter_score: 90,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Imam Fachrudin",
        email: generateEmailFromName("Imam Fachrudin"),
        phone: generateUniquePhone(),
        university: "Universitas Dian Nuswantoro",
        intern_category: getRandomTipeMagang(),
        semester: "5",
        IPK: "3.75",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-08-31",
        google_drive_link: "https://www.example.com",
        CV_score: 84,
        motivation_letter_score: 88,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        id: uuidv4(),
        full_name: "Tyas Nurrahma",
        email: generateEmailFromName("Tyas Nurrahma"),
        phone: generateUniquePhone(),
        university: "Universitas Diponegoro",
        intern_category: getRandomTipeMagang(),
        semester: "8",
        IPK: "3.94",
        KRS_remaining: 5,
        college_major: getRandomJurusan(),
        division_request: getRandomBidangPeminatan(),
        start_month: "2025-07-01",
        end_month: "2025-09-01",
        google_drive_link: "https://www.example.com",
        CV_score: 95,
        motivation_letter_score: 96,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
    ];

    await queryInterface.bulkInsert("applications", data, {});
  },

  down: async (queryInterface, Sequelize) => {
    await queryInterface.bulkDelete("applications", null, {});
  },
};
